<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - DoctorSync</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/users.css">
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
</head>

<body class="min-h-screen font-sans antialiased" style="background-color: white;">

<%- include('adm/nav') -%>
<section id="dashboard" class="mb-12 w-full"  style="margin-left: 120px;">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="stat-card">
                <h3 class="text-lg font-semibold mb-2 text-gray-700">Total Users</h3>
                <p class="text-3xl font-bold text-blue-600"><%= userList?.length || 0 %></p>
            </div>
            <div class="stat-card">
                <h3 class="text-lg font-semibold mb-2 text-gray-700">Total Doctors</h3>
                <p class="text-3xl font-bold text-green-600"><%= doctorList?.length || 0 %></p>
            </div>
            <div class="stat-card">
                <h3 class="text-lg font-semibold mb-2 text-gray-700">Total Patients</h3>
                <p class="text-3xl font-bold text-yellow-600"><%= patientList?.length || 0 %></p>
            </div>
        </div>

        <section id="doctor-stats" class="mb-12 w-full" >
            <!-- <div class="stat-card"> -->
                <h3 class="text-lg font-semibold mb-4 text-blue-600 justify-center">Doctor Specialties</h3>
                <div class="overflow-x-auto">
                    <table class="data-table w-full rounded-xl">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="text-left">Specialty</th>
                                <th class="text-left">Doctors</th>
                                <th class="text-left">Active Prescriptions</th>
                                <th class="text-left">Completed Prescriptions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% specialties.forEach(specialty => { %>
                                <tr>
                                    <td><%= specialty.name %></td>
                                    <td><%= specialty.doctorCount %></td>
                                    <td><%= specialty.activePrescriptions %></td>
                                    <td><%= specialty.completedPrescriptions %></td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
            <!-- </div> -->
        </section>
</section>
</main>

</div>

<script src="/javascripts/adminHelp.js"></script>
    <!-- <script>
        // Initialize Feather Icons
        feather.replace();
        // Sidebar functionality
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.getElementById('hamburger');
            const closeIcon = document.getElementById('close-icon');

            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('main > section');

            function toggleSidebar() {
                sidebar.classList.toggle('open');
            }

            function closeSidebar() {
                sidebar.classList.remove('open');
            }

            hamburger.addEventListener('click', toggleSidebar);
            closeIcon.addEventListener('click', closeSidebar);

        });

        // Delete functionality
        function deleteItem(type, id) {
            if (!confirm(`Are you sure you want to delete this ${type}?`)) {
                return;
            }

            fetch(`/delete-${type}/${id}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                },
                credentials: 'include'
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(error => {
                        throw new Error(error.message || 'Error occurred');
                    });
                }
                return response.json();
            })
            .then(data => {
                alert(data.message || `${type} deleted successfully`);
                window.location.reload();
            })
            .catch(error => {
                console.error(`Error deleting ${type}:`, error);
                alert(`Failed to delete ${type}: ${error.message}`);
            });
        }
    </script> -->
</body>
</html>