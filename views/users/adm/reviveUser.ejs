<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - DoctorSync</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/users.css">
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
</head>

<body class="bg-gray-100 min-h-screen font-sans antialiased">
    <!-- Hamburger Menu -->
    <%- include('nav') -%>

    <h2 class="text-xl font-bold mb-4 text-gray-800">User Management</h2>
    <div class="bg-white rounded-lg shadow overflow-hidden w-full">
        <table class="data-table">
            <thead>
                <tr>
                    <th class="text-left">UserID</th>
                    <th class="text-left">Username</th>
                    <th class="text-left">Email</th>
                    <th class="text-left">Role</th>
                    <th class="text-left">Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (userList && userList.length > 0) { %>
                    <% userList.forEach(user => { %>
                        <tr>
                            <td><%= user.UserID %></td>
                            <td><%= user.Username %></td>
                            <td><%= user.Email %></td>
                            <td><%= user.Role %></td>
                            <td>
                                <button onclick="ReviveItem('user', '<%= user.UserID %>')" class="btn btn-danger">
                                    Activate
                                </button>
                            </td>
                        </tr>
                    <% }) %>
                <% } else { %>
                    <tr>
                        <td colspan="5" class="text-center py-4">No users available</td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</main>
</div>

    <script src="/javascripts/adminHelp.js"></script>
    <!-- <script>
        // Initialize Feather Icons
        feather.replace();

        // Sidebar functionality
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.getElementById('hamburger');
            const closeIcon = document.getElementById('close-icon');

            function toggleSidebar() {
                sidebar.classList.toggle('open');
            }

            function closeSidebar() {
                sidebar.classList.remove('open');
            }

            hamburger.addEventListener('click', toggleSidebar);
            closeIcon.addEventListener('click', closeSidebar);
        });

        // Revive functionality
        function ReviveItem(type, id) {
            if (!confirm(`Are you sure you want to revive this ${type}?`)) {
                return;
            }

            fetch(`/revive-${type}/${id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                },
                credentials: 'include'
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(error => {
                        throw new Error(error.message || 'Error occurred');
                    });
                }
                return response.json();
            })
            .then(data => {
                alert(data.message || `${type} Recovered successfully`);
                window.location.reload();
            })
            .catch(error => {
                console.error(`Error Recovering ${type}:`, error);
                alert(`Failed to Recover ${type}: ${error.message}`);
            });
        }
    </script> -->
</body>
</html>